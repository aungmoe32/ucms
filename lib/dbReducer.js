// const users = [
//   {
//     users: {
//       id: "06e83acc-d388-49ed-87f3-6cbeae235f3f",
//       name: "hai",
//       email: "aung@gmail.com",
//       password: "1323243",
//       userRole: "teacher",
//       major: "EC",
//       gender: "Male",
//       image: "",
//       createdAt: "2024-08-18 09:34:22.528884",
//     },
//     teachers: {
//       id: "baa3f151-2c15-455f-9c1b-ce479a2f7e76",
//       experience: 1,
//       userId: "06e83acc-d388-49ed-87f3-6cbeae235f3f",
//     },
//     teacher_subject: null,
//     subjects: null,
//     semesters: null,
//   },
//   {
//     users: {
//       id: "b345ea99-a045-4554-8afb-11791fefef11",
//       name: "goo",
//       email: "adug@gmail.com",
//       password: "132323",
//       userRole: "teacher",
//       major: "EP",
//       gender: "Female",
//       image: "",
//       createdAt: "2024-08-18 09:35:51.178396",
//     },
//     teachers: {
//       id: "3e5870e4-1ffa-4896-99eb-b3c60661086d",
//       experience: 2,
//       userId: "b345ea99-a045-4554-8afb-11791fefef11",
//     },
//     teacher_subject: null,
//     subjects: null,
//     semesters: null,
//   },
//   {
//     users: {
//       id: "027bf075-7b16-4b60-9fca-1ed436eeee5b",
//       name: "siuu",
//       email: "tagoyor928@iteradev.com",
//       password: "$2a$10$TnvQ7S37FldCZysV4aYW4O6tSGqz1vD7z02O44A8uZD6zYsud84P.",
//       userRole: "teacher",
//       major: "ME",
//       gender: "Male",
//       image: "",
//       createdAt: "2024-08-18 10:03:39.870759",
//     },
//     teachers: {
//       id: "d453086d-4d9e-40ab-9597-49c3c2d18c92",
//       experience: 2,
//       userId: "027bf075-7b16-4b60-9fca-1ed436eeee5b",
//     },
//     teacher_subject: null,
//     subjects: null,
//     semesters: null,
//   },
//   {
//     users: {
//       id: "9d1493f8-5311-49b9-8c38-ad2a186ac15c",
//       name: "fsdfd",
//       email: "student@gmail.comf",
//       password: "$2a$10$YTKBLsYPD1on8VWFTx08RODsTosbq1EB4ugDCW1uDV55qL1ZMvqqe",
//       userRole: "teacher",
//       major: "EC",
//       gender: "Female",
//       image: "",
//       createdAt: "2024-08-18 11:09:43.37987",
//     },
//     teachers: {
//       id: "43773301-5bbb-4262-8bfc-272a425279fe",
//       experience: 2,
//       userId: "9d1493f8-5311-49b9-8c38-ad2a186ac15c",
//     },
//     teacher_subject: {
//       teacherId: "43773301-5bbb-4262-8bfc-272a425279fe",
//       subjectId: "216dc351-7b30-4c2d-b7d2-bee0fce444e9",
//     },
//     subjects: {
//       id: "216dc351-7b30-4c2d-b7d2-bee0fce444e9",
//       name: "BEE",
//       code: "424234",
//       semesterId: "49d4c0d7-5827-49d5-8e32-99e2e4ad2f27",
//     },
//     semesters: {
//       id: "49d4c0d7-5827-49d5-8e32-99e2e4ad2f27",
//       semesterTerm: "Second",
//       major: "IT",
//       year: "2",
//     },
//   },
//   {
//     users: {
//       id: "9d1493f8-5311-49b9-8c38-ad2a186ac15c",
//       name: "fsdfd",
//       email: "student@gmail.comf",
//       password: "$2a$10$YTKBLsYPD1on8VWFTx08RODsTosbq1EB4ugDCW1uDV55qL1ZMvqqe",
//       userRole: "teacher",
//       major: "EC",
//       gender: "Female",
//       image: "",
//       createdAt: "2024-08-18 11:09:43.37987",
//     },
//     teachers: {
//       id: "43773301-5bbb-4262-8bfc-272a425279fe",
//       experience: 2,
//       userId: "9d1493f8-5311-49b9-8c38-ad2a186ac15c",
//     },
//     teacher_subject: {
//       teacherId: "43773301-5bbb-4262-8bfc-272a425279fe",
//       subjectId: "67da502a-3640-4f2c-bb6e-44d3fd0e8a4f",
//     },
//     subjects: {
//       id: "67da502a-3640-4f2c-bb6e-44d3fd0e8a4f",
//       name: "Myanmar",
//       code: "434",
//       semesterId: "3ba2556c-c884-4bf6-af2e-220b700bb6da",
//     },
//     semesters: {
//       id: "3ba2556c-c884-4bf6-af2e-220b700bb6da",
//       semesterTerm: "First",
//       major: "ARCH",
//       year: "1",
//     },
//   },
//   {
//     users: {
//       id: "7d2565da-ac69-41a2-8ef6-b09c8534d4dc",
//       name: "fdsfdsf",
//       email: "tagoyor928fds@iteradev.com",
//       password: "$2a$10$Cejj7FooysdBgpmkMoQnw.H27B5m1PWaxXebN6Djk9GNNNPuN/35e",
//       userRole: "teacher",
//       major: "EP",
//       gender: "Male",
//       image: "",
//       createdAt: "2024-08-18 11:12:25.423952",
//     },
//     teachers: {
//       id: "5299f2f3-d04e-4234-8c6b-4e165d2e8845",
//       experience: 3,
//       userId: "7d2565da-ac69-41a2-8ef6-b09c8534d4dc",
//     },
//     teacher_subject: null,
//     subjects: null,
//     semesters: null,
//   },
//   {
//     users: {
//       id: "74ffe2a6-c6ee-47dc-95ed-e8b337ae15bc",
//       name: "dfd",
//       email: "kaungkaung.gamer01@gmail.com",
//       password: "$2a$10$eTe8WmN0S9UGd3028qBC6uO59kiRsWMhfztb365Xqo6OPqF4P0qp2",
//       userRole: "teacher",
//       major: "IT",
//       gender: "Female",
//       image: "",
//       createdAt: "2024-08-19 13:48:46.750072",
//     },
//     teachers: {
//       id: "0309d78d-5682-4d7e-8377-7d3db41603c1",
//       experience: 4,
//       userId: "74ffe2a6-c6ee-47dc-95ed-e8b337ae15bc",
//     },
//     teacher_subject: {
//       teacherId: "0309d78d-5682-4d7e-8377-7d3db41603c1",
//       subjectId: "216dc351-7b30-4c2d-b7d2-bee0fce444e9",
//     },
//     subjects: {
//       id: "216dc351-7b30-4c2d-b7d2-bee0fce444e9",
//       name: "BEE",
//       code: "424234",
//       semesterId: "49d4c0d7-5827-49d5-8e32-99e2e4ad2f27",
//     },
//     semesters: {
//       id: "49d4c0d7-5827-49d5-8e32-99e2e4ad2f27",
//       semesterTerm: "Second",
//       major: "IT",
//       year: "2",
//     },
//   },
// ];

// type SubjectValue = { [key: string]: {} };
// type Subjects = { [key: string]: SubjectValue };
// type ResultValue = { subjects: Subjects };
// type Result = { [key: string]: ResultValue };
// const res: Result = {};

export const reduceTeachers = function (users) {
  const groupped = users.reduce((result, row) => {
    result[row.id] = result[row.id] || {
      // userId: row.users.id,
      // user: row.users,
      id: row.id,
      name: row.name,
      email: row.email,
      role: row.role,
      major: row.major,
      gender: row.gender,
      teacher: row.teachers,
      subjects: {},
    };

    if (row.teacher_subject) {
      // console.log(row.teacher_subject);
      result[row.id].subjects[
        row.teacher_subject.teacher_id + row.teacher_subject.subject_id
      ] = {
        subject: row.subjects,
        semester: {},
      };

      result[row.id].subjects[
        row.teacher_subject.teacher_id + row.teacher_subject.subject_id
      ].semester = row.semesters;
    }

    return result;
  }, {});

  const final = Object.values(groupped).map((user) => {
    user.subjects = Object.values(user.subjects);
    // console.log(user.subjects);
    user.subjects = user.subjects.map((sub) => {
      sub = { ...sub.subject, semester: sub.semester };
      return sub;
    });
    return user;
  });
  return final;
};

// reduceTeachers(users);
// console.log(reduceTeachers(users));
